import os
import numpy as np
import matplotlib.pyplot as plt

styles = ['k-', 'b.-', 'r--', 'm:', 'ys-', 'go-', 'c^-',
          'k.-', 'b--', 'r:', 'ms-','yo-', 'g^-', 'c-',
          'k--', 'b:', 'rs-', 'mo-', 'y^-', 'g-', 'c.-',
          'k:', 'bs-', 'ro-', 'm^-', 'y-', 'g.-', 'c--',
          'ks-', 'bo-', 'r^-', 'm-', 'y.-', 'g--', 'c-',
          'ko-', 'b^-', 'r-', 'm.-', 'y--', 'g-', 'cs-']

def draw_cdf(data, ls, lg):
    sorted_data = np.sort(data)
    yvals = np.arange(len(sorted_data))/float(len(sorted_data))
    plt.plot(sorted_data, yvals, ls, label=lg, linewidth=1)
    plt.savefig('myfig')

amazon_chunk_1_final = [0.018867969512939453, 0.10175919532775879, 0.1417231559753418, 0.08076906204223633, 0.018377065658569336, 0.06332898139953613, 0.03864407539367676, 0.12600111961364746, 0.8751959800720215, 0.28197598457336426, 0.035386085510253906, 0.0979299545288086, 0.023624897003173828, 0.05208897590637207, 0.23563790321350098, 0.014709949493408203, 0.017884016036987305, 0.016217947006225586, 0.1262199878692627, 0.05561208724975586, 0.019958972930908203, 1.6495959758758545, 0.4138929843902588, 0.0688779354095459, 0.07961106300354004, 0.3982548713684082, 5.025454998016357, 0.03825998306274414, 0.0690908432006836, 0.716742992401123, 0.0645608901977539, 0.06244206428527832, 0.027344942092895508, 0.07404494285583496, 0.11513710021972656, 0.10012698173522949, 0.4559018611907959, 0.08216691017150879, 0.037268877029418945, 0.1448051929473877, 0.2107398509979248, 0.022253990173339844, 0.02897500991821289, 0.08228898048400879, 0.026582956314086914, 0.11759591102600098, 0.0588068962097168, 0.04918098449707031, 0.14843297004699707, 0.031217098236083984, 0.6899309158325195, 0.0798180103302002, 0.07261204719543457, 0.10284709930419922]

google_chunk_1_final = [0.036253929138183594, 0.0987248420715332, 0.03923606872558594, 11.99117398262024, 0.0500638484954834, 0.10637593269348145, 0.03691387176513672, 0.17431998252868652, 0.13513588905334473, 0.04131793975830078, 0.08201885223388672, 0.026784896850585938, 0.2509949207305908, 0.2416839599609375, 0.06064200401306152, 0.749143123626709, 0.5720729827880859, 0.2727830410003662, 0.042784929275512695, 0.13014912605285645, 0.14810585975646973, 0.27091193199157715, 0.17641687393188477, 0.23653101921081543, 0.026972055435180664, 0.13777899742126465, 0.02764606475830078, 0.04234790802001953, 0.026592016220092773, 0.03795194625854492, 0.038559913635253906, 0.05455517768859863, 0.13435006141662598, 0.04599595069885254, 0.5807979106903076, 0.0371091365814209, 0.24282503128051758, 0.06001114845275879, 0.7868947982788086, 0.20642805099487305, 0.2543959617614746, 0.5489768981933594, 0.05680489540100098, 0.29834794998168945, 0.09253811836242676, 0.04799485206604004, 0.08604812622070312, 0.04230189323425293, 0.24880099296569824, 0.08856081962585449, 0.03852987289428711, 0.06218409538269043, 0.13519692420959473, 0.29613208770751953]

azure_verizon_chunk_1_final = [0.43252992630004883, 0.234450101852417, 0.1898050308227539, 0.021605968475341797, 0.013525962829589844, 0.007153987884521484, 0.11725997924804688, 0.0677499771118164, 0.0529630184173584, 0.018198013305664062, 0.019999027252197266, 0.0807797908782959, 0.053346872329711914, 0.02420806884765625, 0.040255069732666016, 0.09972381591796875, 0.01084589958190918, 0.13829588890075684, 0.015923023223876953, 0.023141860961914062, 0.019482135772705078, 0.022371768951416016, 0.6630759239196777, 0.06900286674499512, 0.018991947174072266, 0.015969038009643555, 0.01609206199645996, 0.008893966674804688, 0.03181791305541992, 1.0224311351776123, 0.06035208702087402, 0.09963798522949219, 0.09799909591674805, 0.010985136032104492, 0.005040884017944336, 0.2900669574737549, 0.022202014923095703, 0.040724992752075195, 0.13873600959777832, 0.8346021175384521, 0.010310173034667969, 0.02095317840576172, 0.012218952178955078, 0.06549906730651855, 0.02335500717163086, 0.09693694114685059, 0.0484769344329834, 0.08556604385375977, 0.020814180374145508, 0.012521028518676758, 0.0337979793548584, 0.009668111801147461, 0.0072939395904541016, 0.006308078765869141]

azure_akamai_chunk_1_final = [0.03285408020019531, 0.10108304023742676, 0.2867469787597656, 1.4562420845031738, 0.008278131484985352, 0.4669308662414551, 0.34244513511657715, 0.04847002029418945, 0.4645111560821533, 0.5994060039520264, 0.012686014175415039, 0.04881596565246582, 0.051325082778930664, 0.05672001838684082, 0.022523164749145508, 0.020843029022216797, 0.011986970901489258, 0.011707067489624023, 0.013885021209716797, 0.020643949508666992, 0.023035049438476562, 0.05762600898742676, 0.11946797370910645, 0.0503849983215332, 0.06186509132385254, 0.024763107299804688, 0.36625123023986816, 0.04453897476196289, 0.020596027374267578, 0.11855316162109375, 0.012434005737304688, 0.11203885078430176, 0.03202199935913086, 0.1864018440246582, 0.01137089729309082, 0.05725502967834473, 0.02354717254638672, 0.01230621337890625, 0.14882397651672363, 0.18694210052490234, 0.010607004165649414, 0.21672582626342773, 1.5252320766448975, 0.008249044418334961, 0.22692418098449707, 0.019058942794799805, 0.042788028717041016, 0.061656951904296875, 0.0173799991607666, 0.09110116958618164, 0.05584120750427246, 0.04541897773742676, 0.07283711433410645, 0.02251601219177246]

amazon_chunk_2_final = [0.011291027069091797, 0.02007889747619629, 0.5093250274658203, 0.06286287307739258, 0.009222984313964844, 0.023691177368164062, 0.017316818237304688, 0.0891878604888916, 1.0626111030578613, 0.2530100345611572, 0.025099992752075195, 0.03822207450866699, 0.014538049697875977, 0.0429539680480957, 0.22927188873291016, 0.6156630516052246, 0.012753963470458984, 0.04698991775512695, 0.01323699951171875, 0.08220815658569336, 0.010460138320922852, 1.4529390335083008, 0.3914830684661865, 0.03491806983947754, 0.07078003883361816, 0.3182380199432373, 0.007380008697509766, 0.1138150691986084, 0.08354902267456055, 0.7035620212554932, 0.06802701950073242, 0.019760847091674805, 0.030868053436279297, 0.06212878227233887, 0.09739899635314941, 0.08289504051208496, 0.4178929328918457, 0.025022029876708984, 0.016119003295898438, 0.5688910484313965, 0.0439610481262207, 0.012240171432495117, 0.033013105392456055, 0.04484891891479492, 0.025259017944335938, 0.11462903022766113, 0.03301095962524414, 0.04952502250671387, 0.040016889572143555, 0.035127878189086914, 0.7041020393371582, 0.39859604835510254, 0.3986701965332031, 0.04117107391357422]

google_chunk_2_final = [0.034638166427612305, 0.10031390190124512, 0.042366981506347656, 12.006452798843384, 0.04297208786010742, 0.10247802734375, 0.03845500946044922, 0.17978191375732422, 0.13444900512695312, 0.040721893310546875, 0.08215212821960449, 0.027225017547607422, 0.14417099952697754, 0.24306297302246094, 0.061891794204711914, 1.1179711818695068, 0.5640349388122559, 0.23512005805969238, 0.04242587089538574, 0.1275029182434082, 0.15048909187316895, 0.24331283569335938, 0.1765599250793457, 0.23579192161560059, 0.026732921600341797, 0.13632583618164062, 0.02765512466430664, 0.05260801315307617, 0.027737140655517578, 0.0374300479888916, 0.03847789764404297, 0.045243024826049805, 0.1369788646697998, 0.04563188552856445, 0.789794921875, 0.04269099235534668, 0.24368000030517578, 0.05988621711730957, 0.6959869861602783, 3.209489107131958, 0.25098705291748047, 0.574383020401001, 0.05035805702209473, 0.3457159996032715, 0.08874201774597168, 5.055254936218262, 0.08763694763183594, 0.04285407066345215, 0.24892020225524902, 0.09008097648620605, 0.03729891777038574, 0.0616459846496582, 0.13063716888427734, 0.2901020050048828]

azure_verizon_chunk_2_final = [0.4321558475494385, 0.23700594902038574, 0.28313207626342773, 0.021950960159301758, 0.012274026870727539, 0.006524801254272461, 0.11708903312683105, 0.06559491157531738, 0.05761599540710449, 0.01786208152770996, 0.016891956329345703, 3.0737390518188477, 0.04964590072631836, 0.024094104766845703, 0.0379941463470459, 0.09847402572631836, 0.010873079299926758, 0.13814592361450195, 0.015869855880737305, 0.023136138916015625, 0.006541013717651367, 0.022258996963500977, 1.0935990810394287, 0.4799330234527588, 0.0177609920501709, 0.015521049499511719, 0.01583695411682129, 0.010825872421264648, 0.03233790397644043, 1.0127458572387695, 0.06829690933227539, 0.10078310966491699, 0.1015470027923584, 0.01112818717956543, 0.00590205192565918, 0.29663991928100586, 0.021164894104003906, 0.04024505615234375, 0.13821983337402344, 0.8331971168518066, 0.013293027877807617, 0.0567169189453125, 0.0054171085357666016, 0.0655660629272461, 0.02364802360534668, 0.4767649173736572, 0.048168182373046875, 0.08604693412780762, 0.020982027053833008, 0.012495040893554688, 0.03181791305541992, 0.010561943054199219, 0.007203102111816406, 0.006134033203125]

azure_akamai_chunk_2_final = [0.03456711769104004, 0.10075592994689941, 0.07211494445800781, 1.8857100009918213, 0.011001110076904297, 0.4696791172027588, 0.3458881378173828, 0.0474700927734375, 0.45122718811035156, 0.6895229816436768, 1.0393190383911133, 0.04668402671813965, 0.05015206336975098, 0.05802607536315918, 0.02250814437866211, 0.023101806640625, 0.0125579833984375, 0.011779069900512695, 0.009979963302612305, 0.02278590202331543, 0.02283620834350586, 0.05756711959838867, 0.1295320987701416, 0.04740190505981445, 0.062330007553100586, 0.02457904815673828, 0.3857698440551758, 0.043395042419433594, 0.007030010223388672, 0.11882209777832031, 0.014120817184448242, 0.11232590675354004, 0.03104114532470703, 0.2578389644622803, 0.01751995086669922, 0.05416107177734375, 0.024938106536865234, 0.011454105377197266, 0.10448598861694336, 0.1957540512084961, 0.011224985122680664, 0.21673011779785156, 1.0921499729156494, 0.008034944534301758, 0.21864700317382812, 0.018950939178466797, 0.04262685775756836, 0.06175398826599121, 0.01724100112915039, 0.08699917793273926, 0.05616116523742676, 0.0461878776550293, 0.07462096214294434, 0.0217130184173584]

amazon_chunk_3_final = [0.01081395149230957, 0.019237995147705078, 0.1386110782623291, 0.06469011306762695, 0.01085209846496582, 0.027926206588745117, 0.01881694793701172, 0.09595203399658203, 0.5342710018157959, 0.025114059448242188, 0.011569023132324219, 0.014225959777832031, 0.020907163619995117, 0.04260993003845215, 0.01013803482055664, 0.010074853897094727, 0.01295614242553711, 0.009821176528930664, 0.01296687126159668, 0.04606890678405762, 0.009586095809936523, 1.2430329322814941, 0.025303125381469727, 0.037407875061035156, 0.07144308090209961, 0.3209569454193115, 0.00978708267211914, 0.017385005950927734, 0.07354402542114258, 0.7153820991516113, 0.03293204307556152, 0.020694971084594727, 0.013434886932373047, 0.01968097686767578, 0.09757804870605469, 0.06618213653564453, 0.32111597061157227, 0.06466412544250488, 0.009103059768676758, 0.13903403282165527, 0.037429094314575195, 0.01051187515258789, 0.02367711067199707, 0.04654192924499512, 0.02293109893798828, 0.11417293548583984, 0.03218412399291992, 0.03838181495666504, 0.009804010391235352, 0.01736307144165039, 0.6961078643798828, 0.06991720199584961, 0.06991696357727051, 0.014805078506469727]

google_chunk_3_final = [0.04716801643371582, 0.09838104248046875, 0.04233980178833008, 11.997574090957642, 0.043640851974487305, 0.10687398910522461, 0.04401111602783203, 0.1788311004638672, 0.1357269287109375, 0.04390215873718262, 0.0822138786315918, 0.027439117431640625, 0.24782204627990723, 0.23969817161560059, 0.05929994583129883, 0.4586219787597656, 0.5709390640258789, 0.23425507545471191, 0.04307699203491211, 0.12805485725402832, 0.1533198356628418, 0.24420690536499023, 0.17716598510742188, 0.2354569435119629, 0.027047157287597656, 0.13778114318847656, 0.029312849044799805, 0.03675699234008789, 0.02753281593322754, 0.041081905364990234, 0.039359092712402344, 0.05051088333129883, 0.13631296157836914, 0.05225992202758789, 0.588616132736206, 0.036466121673583984, 0.2518589496612549, 0.05980992317199707, 0.8069820404052734, 0.005621910095214844, 0.2509899139404297, 0.5539040565490723, 0.11687588691711426, 0.2944779396057129, 0.10195779800415039, 0.0487370491027832, 0.08687114715576172, 0.04283404350280762, 0.24853301048278809, 0.08825397491455078, 0.0377349853515625, 0.06109309196472168, 0.13443493843078613, 0.2984139919281006]

azure_verizon_chunk_3_final = [0.4322547912597656, 0.3255331516265869, 0.02142810821533203, 0.011008024215698242, 0.2775700092315674, 0.6650168895721436, 3.4268720149993896, 0.05616307258605957, 0.48934412002563477, 0.01728200912475586, 3.0881340503692627, 0.048236846923828125, 0.023998022079467773, 0.3366670608520508, 0.1000981330871582, 0.02758002281188965, 0.13845396041870117, 0.01609516143798828, 0.027918100357055664, 0.0063800811767578125, 0.27332305908203125, 0.7802670001983643, 0.45876312255859375, 0.01756596565246582, 0.015809059143066406, 0.2545619010925293, 0.034880876541137695, 0.031601905822753906, 1.8331398963928223, 0.14178204536437988, 0.1496431827545166, 0.09745502471923828, 0.3840792179107666, 0.004971027374267578, 1.7501270771026611, 0.020920991897583008, 0.041198015213012695, 0.13801097869873047, 0.9109790325164795, 0.011183023452758789, 0.052802085876464844, 0.0059359073638916016, 0.3668360710144043, 0.02387094497680664, 0.46001291275024414, 0.04816603660583496, 0.464061975479126, 0.0888829231262207, 0.12271904945373535, 0.03171110153198242, 0.03249502182006836, 0.00615692138671875, 0.006418943405151367]

azure_akamai_chunk_3_final = [0.03119802474975586, 0.10105204582214355, 0.2796649932861328, 0.6526620388031006, 0.0081939697265625, 0.46849894523620605, 0.34427618980407715, 0.04822587966918945, 0.46718621253967285, 0.7251451015472412, 0.6100239753723145, 0.04993581771850586, 0.04960203170776367, 0.05720019340515137, 0.022452116012573242, 0.02084207534790039, 0.012351036071777344, 0.011245012283325195, 0.010286092758178711, 0.018718957901000977, 0.02275395393371582, 0.058072805404663086, 0.11979985237121582, 0.0469820499420166, 0.062091827392578125, 0.02424001693725586, 0.5188181400299072, 0.05267500877380371, 0.021079063415527344, 0.11875200271606445, 0.013128995895385742, 0.11913800239562988, 0.031638145446777344, 0.18722295761108398, 0.01305079460144043, 0.06083106994628906, 0.024161815643310547, 0.012455940246582031, 0.20572686195373535, 0.1870889663696289, 0.01040792465209961, 0.21668577194213867, 1.0719919204711914, 0.008056879043579102, 0.22684693336486816, 0.0188601016998291, 0.042874813079833984, 0.06211209297180176, 0.01708197593688965, 0.08787107467651367, 0.051811933517456055, 0.04523205757141113, 0.0950460433959961, 0.02253413200378418]

fig, ax = plt.subplots()

draw_cdf(amazon_chunk_1_final, 'k-', "AWS (CloudFront), chunk 1")
draw_cdf(amazon_chunk_2_final, 'k.-', "AWS (CloudFront), chunk 2")
draw_cdf(amazon_chunk_3_final, 'k--', "AWS (CloudFront), chunk 3")
draw_cdf(azure_akamai_chunk_1_final, 'b-', "Azure (Akamai), chunk 1")
draw_cdf(azure_akamai_chunk_2_final, 'b.-', "Azure (Akamai),chunk 2")
draw_cdf(azure_akamai_chunk_3_final, 'b--', "Azure (Akamai), chunk 3")
draw_cdf(azure_verizon_chunk_1_final, 'r-', "Azure (Verizon), chunk 1")
draw_cdf(azure_verizon_chunk_2_final, 'r.-', "Azure (Verizon), chunk 2")
draw_cdf(azure_verizon_chunk_3_final, 'r--', "Azure (Verizon), chunk 3")
draw_cdf(google_chunk_1_final, 'g-', "Google, chunk 1")
draw_cdf(google_chunk_2_final, 'g.-', "Google, chunk 2")
draw_cdf(google_chunk_3_final, 'g--', "Google, chunk 3")


ax.set_xlabel(r'Response time for all chunks across Cloud Provider CDNs (last iteration)', fontsize=12)
ax.set_ylabel(r'Percentage of PlanetLab users', fontsize=12)
plt.xlim([0, 5])
plt.ylim([0, 1])
plt.legend(loc=4)

imgName = "percentusersresptime"
plt.savefig(imgName)
plt.show()

