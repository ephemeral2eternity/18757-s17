import os
import numpy as np
import matplotlib.pyplot as plt

styles = ['k-', 'b.-', 'r--', 'm:', 'ys-', 'go-', 'c^-',
          'k.-', 'b--', 'r:', 'ms-','yo-', 'g^-', 'c-',
          'k--', 'b:', 'rs-', 'mo-', 'y^-', 'g-', 'c.-',
          'k:', 'bs-', 'ro-', 'm^-', 'y-', 'g.-', 'c--',
          'ks-', 'bo-', 'r^-', 'm-', 'y.-', 'g--', 'c-',
          'ko-', 'b^-', 'r-', 'm.-', 'y--', 'g-', 'cs-']

def draw_cdf(data, ls, lg):
    sorted_data = np.sort(data)
    yvals = np.arange(len(sorted_data))/float(len(sorted_data))
    plt.plot(sorted_data, yvals, ls, label=lg, linewidth=1)
    plt.savefig('myfig')

amazon_chunk_1_init = [0.022539138793945312, 0.061280012130737305, 0.5081789493560791, 0.5653960704803467, 0.017521142959594727, 0.025111913681030273, 0.018075942993164062, 0.31891703605651855, 1.0356581211090088, 0.3211500644683838, 0.2362079620361328, 0.035722970962524414, 0.013586044311523438, 0.04295992851257324, 0.24044084548950195, 0.6402959823608398, 0.013705015182495117, 0.029371023178100586, 0.012992143630981445, 0.4003880023956299, 0.008959054946899414, 1.2850239276885986, 0.04766201972961426, 0.0379328727722168, 0.0886530876159668, 0.47759103775024414, 0.010212898254394531, 0.45111513137817383, 0.557049036026001, 0.718271017074585, 0.06316184997558594, 0.034240007400512695, 0.01505899429321289, 0.0691990852355957, 0.3364379405975342, 0.07264089584350586, 0.2991318702697754, 0.02617502212524414, 0.755518913269043, 0.14195799827575684, 0.04833078384399414, 0.009191036224365234, 0.3992321491241455, 0.38499903678894043, 0.5072669982910156, 0.13697504997253418, 0.037535905838012695, 0.049935102462768555, 0.011526823043823242, 0.030012845993041992, 0.6966891288757324, 0.0818479061126709, 0.5188519954681396, 0.03536581993103027]

amazon_chunk_1_middle = [0.02018880844116211, 0.0179598331451416, 0.15018010139465332, 0.0626981258392334, 0.009268045425415039, 0.02482295036315918, 0.017911911010742188, 0.0907289981842041, 1.004014015197754, 0.28785014152526855, 0.03481602668762207, 0.03473997116088867, 0.013237953186035156, 0.04231619834899902, 0.22901606559753418, 0.6115391254425049, 0.012727022171020508, 0.06865382194519043, 0.007589101791381836, 0.05469799041748047, 0.01061105728149414, 0.5417189598083496, 0.04872703552246094, 0.03479599952697754, 0.07119083404541016, 0.32651185989379883, 0.010196924209594727, 0.031286001205444336, 0.06950592994689941, 0.7080979347229004, 0.0254209041595459, 0.02205181121826172, 0.02637791633605957, 0.061083078384399414, 0.10123610496520996, 0.06961512565612793, 0.4076108932495117, 0.022474050521850586, 0.01581096649169922, 0.5135910511016846, 0.03497600555419922, 0.008032083511352539, 0.03197503089904785, 0.08034300804138184, 0.025323152542114258, 0.11503887176513672, 0.036489009857177734, 0.05746197700500488, 0.009514808654785156, 0.06736898422241211, 0.7111239433288574, 0.07214498519897461, 0.07148385047912598, 0.03688812255859375]

amazon_chunk_1_final = [0.011291027069091797, 0.02007889747619629, 0.5093250274658203, 0.06286287307739258, 0.009222984313964844, 0.023691177368164062, 0.017316818237304688, 0.0891878604888916, 1.0626111030578613, 0.2530100345611572, 0.025099992752075195, 0.03822207450866699, 0.014538049697875977, 0.0429539680480957, 0.22927188873291016, 0.6156630516052246, 0.012753963470458984, 0.04698991775512695, 0.01323699951171875, 0.08220815658569336, 0.010460138320922852, 1.4529390335083008, 0.3914830684661865, 0.03491806983947754, 0.07078003883361816, 0.3182380199432373, 0.007380008697509766, 0.1138150691986084, 0.08354902267456055, 0.7035620212554932, 0.06802701950073242, 0.019760847091674805, 0.030868053436279297, 0.06212878227233887, 0.09739899635314941, 0.08289504051208496, 0.4178929328918457, 0.025022029876708984, 0.016119003295898438, 0.5688910484313965, 0.0439610481262207, 0.012240171432495117, 0.033013105392456055, 0.04484891891479492, 0.025259017944335938, 0.11462903022766113, 0.03301095962524414, 0.04952502250671387, 0.040016889572143555, 0.035127878189086914, 0.7041020393371582, 0.39859604835510254, 0.3986701965332031, 0.04117107391357422]

google_chunk_1_init = [0.03888583183288574, 0.10262703895568848, 0.04435610771179199, 10.304776191711426, 0.575078010559082, 0.46755194664001465, 0.03856086730957031, 0.17410898208618164, 0.13662099838256836, 0.039906978607177734, 0.08237099647521973, 0.02879500389099121, 0.2475450038909912, 0.23704099655151367, 0.06205892562866211, 1.0414040088653564, 0.5687201023101807, 0.23894906044006348, 0.04231882095336914, 0.32587313652038574, 0.15955686569213867, 0.24437403678894043, 0.18225693702697754, 0.23556995391845703, 0.02919602394104004, 0.33269405364990234, 0.2770099639892578, 0.23325085639953613, 0.029008150100708008, 0.040557861328125, 0.03962302207946777, 0.05016589164733887, 0.13557004928588867, 0.0506899356842041, 0.5875809192657471, 0.0372622013092041, 0.3759779930114746, 0.061337947845458984, 0.7416660785675049, 0.22034788131713867, 0.2557799816131592, 0.7789590358734131, 0.04908490180969238, 0.2932908535003662, 0.09761381149291992, 0.05195498466491699, 0.5800490379333496, 0.043183088302612305, 0.24962306022644043, 0.09296989440917969, 0.0382390022277832, 0.0602869987487793, 0.1195838451385498, 0.29665613174438477]

google_chunk_1_middle = [0.03518509864807129, 0.10515499114990234, 0.04026079177856445, 12.006711959838867, 0.04341411590576172, 0.13881516456604004, 0.038575172424316406, 0.1785259246826172, 0.1347360610961914, 0.07378005981445312, 0.08199596405029297, 0.02773284912109375, 0.24714303016662598, 0.24105095863342285, 0.06189298629760742, 1.2258350849151611, 0.5697591304779053, 0.23407888412475586, 0.042382001876831055, 0.1283259391784668, 0.15532708168029785, 0.2423551082611084, 0.18118691444396973, 0.23609113693237305, 0.026468992233276367, 0.15591001510620117, 0.02764892578125, 0.03978586196899414, 0.027038097381591797, 0.03875398635864258, 0.03902602195739746, 0.05416107177734375, 0.1394798755645752, 0.05032801628112793, 0.5808789730072021, 0.03715801239013672, 0.2430119514465332, 0.05875205993652344, 0.8361968994140625, 0.41591501235961914, 0.24999308586120605, 0.7794969081878662, 0.04946303367614746, 0.3005790710449219, 0.09955501556396484, 0.04404091835021973, 0.08552408218383789, 0.044901132583618164, 0.24877500534057617, 0.08778905868530273, 0.03557705879211426, 0.06154799461364746, 0.12827301025390625, 0.2936410903930664]

google_chunk_1_final = [0.034638166427612305, 0.10031390190124512, 0.042366981506347656, 12.006452798843384, 0.04297208786010742, 0.10247802734375, 0.03845500946044922, 0.17978191375732422, 0.13444900512695312, 0.040721893310546875, 0.08215212821960449, 0.027225017547607422, 0.14417099952697754, 0.24306297302246094, 0.061891794204711914, 1.1179711818695068, 0.5640349388122559, 0.23512005805969238, 0.04242587089538574, 0.1275029182434082, 0.15048909187316895, 0.24331283569335938, 0.1765599250793457, 0.23579192161560059, 0.026732921600341797, 0.13632583618164062, 0.02765512466430664, 0.05260801315307617, 0.027737140655517578, 0.0374300479888916, 0.03847789764404297, 0.045243024826049805, 0.1369788646697998, 0.04563188552856445, 0.789794921875, 0.04269099235534668, 0.24368000030517578, 0.05988621711730957, 0.6959869861602783, 3.209489107131958, 0.25098705291748047, 0.574383020401001, 0.05035805702209473, 0.3457159996032715, 0.08874201774597168, 5.055254936218262, 0.08763694763183594, 0.04285407066345215, 0.24892020225524902, 0.09008097648620605, 0.03729891777038574, 0.0616459846496582, 0.13063716888427734, 0.2901020050048828]

azure_verizon_chunk_1_init = [1.8106250762939453, 0.18767595291137695, 0.3115839958190918, 0.021717071533203125, 0.01091909408569336, 0.37342190742492676, 0.4032249450683594, 3.3427538871765137, 0.05593514442443848, 0.47307395935058594, 0.017467021942138672, 0.08336997032165527, 0.05024600028991699, 0.023637056350708008, 0.5002851486206055, 0.1031031608581543, 0.02884697914123535, 0.3792259693145752, 0.016158103942871094, 0.02982187271118164, 0.006879091262817383, 0.2708241939544678, 0.8497240543365479, 0.839824914932251, 0.01753711700439453, 0.016459941864013672, 0.2949531078338623, 0.3723320960998535, 0.0320279598236084, 1.219599962234497, 0.4075450897216797, 0.36962890625, 0.09849190711975098, 0.3258371353149414, 0.005221843719482422, 2.5300819873809814, 0.022432804107666016, 0.038713932037353516, 0.1388530731201172, 0.8379201889038086, 0.012118101119995117, 0.12226700782775879, 0.008075952529907227, 0.7217791080474854, 0.023686885833740234, 0.8408200740814209, 0.04864215850830078, 0.37597203254699707, 0.3206520080566406, 2.311682939529419, 0.032666921615600586, 0.03484392166137695, 0.006173849105834961, 0.006418943405151367]

azure_verizon_chunk_1_middle = [3.8485450744628906, 0.22668910026550293, 0.2064969539642334, 0.021577119827270508, 0.009597063064575195, 0.007303953170776367, 0.11730790138244629, 0.0699930191040039, 0.05456399917602539, 0.018082857131958008, 0.01836991310119629, 0.07509398460388184, 0.049591064453125, 0.024499893188476562, 0.036798954010009766, 0.09916806221008301, 0.010673046112060547, 0.13824796676635742, 0.015985965728759766, 0.041166067123413086, 0.018821001052856445, 0.022253036499023438, 0.8962540626525879, 0.48004984855651855, 0.01910996437072754, 0.015367984771728516, 0.015952110290527344, 0.03434395790100098, 0.031691789627075195, 0.45421504974365234, 0.06060004234313965, 0.09850502014160156, 0.09722304344177246, 0.011394023895263672, 0.004720926284790039, 0.2860829830169678, 0.02284407615661621, 0.03871893882751465, 0.1381690502166748, 0.8347499370574951, 0.009905099868774414, 0.023007869720458984, 0.006987094879150391, 0.06676197052001953, 0.023474931716918945, 0.4777970314025879, 0.047955989837646484, 0.08571314811706543, 0.02068185806274414, 0.012825965881347656, 0.03234601020812988, 0.009696006774902344, 0.005955934524536133, 0.00587916374206543]

azure_verizon_chunk_1_final = [0.4321558475494385, 0.23700594902038574, 0.28313207626342773, 0.021950960159301758, 0.012274026870727539, 0.006524801254272461, 0.11708903312683105, 0.06559491157531738, 0.05761599540710449, 0.01786208152770996, 0.016891956329345703, 3.0737390518188477, 0.04964590072631836, 0.024094104766845703, 0.0379941463470459, 0.09847402572631836, 0.010873079299926758, 0.13814592361450195, 0.015869855880737305, 0.023136138916015625, 0.006541013717651367, 0.022258996963500977, 1.0935990810394287, 0.4799330234527588, 0.0177609920501709, 0.015521049499511719, 0.01583695411682129, 0.010825872421264648, 0.03233790397644043, 1.0127458572387695, 0.06829690933227539, 0.10078310966491699, 0.1015470027923584, 0.01112818717956543, 0.00590205192565918, 0.29663991928100586, 0.021164894104003906, 0.04024505615234375, 0.13821983337402344, 0.8331971168518066, 0.013293027877807617, 0.0567169189453125, 0.0054171085357666016, 0.0655660629272461, 0.02364802360534668, 0.4767649173736572, 0.048168182373046875, 0.08604693412780762, 0.020982027053833008, 0.012495040893554688, 0.03181791305541992, 0.010561943054199219, 0.007203102111816406, 0.006134033203125]

azure_akamai_chunk_1_init = [0.03169703483581543, 0.6506350040435791, 0.6069672107696533, 3.2320690155029297, 0.04731893539428711, 1.6147840023040771, 0.3422820568084717, 0.04893898963928223, 0.4661259651184082, 0.8301339149475098, 0.8561549186706543, 0.17217707633972168, 0.051833152770996094, 0.057121992111206055, 0.47867488861083984, 0.053993940353393555, 0.7679100036621094, 0.011493921279907227, 0.010606765747070312, 0.08896708488464355, 0.2735419273376465, 0.06400895118713379, 0.1302049160003662, 0.043673038482666016, 0.06206202507019043, 0.023547887802124023, 0.21786212921142578, 0.17195415496826172, 0.007375001907348633, 0.4878828525543213, 0.7680149078369141, 0.5574190616607666, 0.03137493133544922, 0.18733596801757812, 0.20153212547302246, 0.05394601821899414, 0.025254011154174805, 0.011404037475585938, 0.5390639305114746, 0.36579203605651855, 0.037483930587768555, 0.22720909118652344, 0.9710779190063477, 0.5522267818450928, 0.21937298774719238, 0.32373714447021484, 0.5338809490203857, 1.416670799255371, 0.017313003540039062, 0.3454771041870117, 0.07042789459228516, 0.04600405693054199, 0.27976298332214355, 0.21854400634765625]

azure_akamai_chunk_1_middle = [0.031304121017456055, 0.10220098495483398, 0.2800290584564209, 1.3441200256347656, 0.008407115936279297, 0.47774410247802734, 0.341886043548584, 0.04796099662780762, 0.5865569114685059, 0.7033629417419434, 0.012182950973510742, 0.04915308952331543, 0.06267309188842773, 0.06045699119567871, 0.022691011428833008, 0.027000904083251953, 0.01269388198852539, 0.011578083038330078, 0.010102987289428711, 0.01872396469116211, 0.02325296401977539, 0.057660818099975586, 5.157392978668213, 0.04532885551452637, 0.0621340274810791, 0.023823022842407227, 0.24931788444519043, 0.04780411720275879, 0.02006387710571289, 0.11867308616638184, 0.011826038360595703, 0.1194159984588623, 0.03109121322631836, 0.18659496307373047, 0.012070178985595703, 0.05600905418395996, 0.026034832000732422, 0.015774965286254883, 0.13666915893554688, 0.18692898750305176, 0.014267921447753906, 0.2479851245880127, 1.9605331420898438, 0.008028030395507812, 0.22643399238586426, 0.018870115280151367, 0.04304194450378418, 0.06242108345031738, 0.01876211166381836, 0.08882999420166016, 0.05283498764038086, 0.0455169677734375, 0.08854198455810547, 0.021033048629760742]

azure_akamai_chunk_1_final = [0.03456711769104004, 0.10075592994689941, 0.07211494445800781, 1.8857100009918213, 0.011001110076904297, 0.4696791172027588, 0.3458881378173828, 0.0474700927734375, 0.45122718811035156, 0.6895229816436768, 1.0393190383911133, 0.04668402671813965, 0.05015206336975098, 0.05802607536315918, 0.02250814437866211, 0.023101806640625, 0.0125579833984375, 0.011779069900512695, 0.009979963302612305, 0.02278590202331543, 0.02283620834350586, 0.05756711959838867, 0.1295320987701416, 0.04740190505981445, 0.062330007553100586, 0.02457904815673828, 0.3857698440551758, 0.043395042419433594, 0.007030010223388672, 0.11882209777832031, 0.014120817184448242, 0.11232590675354004, 0.03104114532470703, 0.2578389644622803, 0.01751995086669922, 0.05416107177734375, 0.024938106536865234, 0.011454105377197266, 0.10448598861694336, 0.1957540512084961, 0.011224985122680664, 0.21673011779785156, 1.0921499729156494, 0.008034944534301758, 0.21864700317382812, 0.018950939178466797, 0.04262685775756836, 0.06175398826599121, 0.01724100112915039, 0.08699917793273926, 0.05616116523742676, 0.0461878776550293, 0.07462096214294434, 0.0217130184173584]

fig, ax = plt.subplots()

draw_cdf(amazon_chunk_1_init, 'k-', "AWS (CloudFront), start")
draw_cdf(amazon_chunk_1_middle, 'k.-', "AWS (CloudFront), middle")
draw_cdf(amazon_chunk_1_final, 'k--', "AWS (CloudFront), final")
draw_cdf(azure_akamai_chunk_1_init, 'b-', "Azure (Akamai), start")
draw_cdf(azure_akamai_chunk_1_middle, 'b.-', "Azure (Akamai), middle")
draw_cdf(azure_akamai_chunk_1_final, 'b--', "Azure (Akamai), final")
draw_cdf(azure_verizon_chunk_1_init, 'r-', "Azure (Verizon), start")
draw_cdf(azure_verizon_chunk_1_middle, 'r.-', "Azure (Verizon), middle")
draw_cdf(azure_verizon_chunk_1_final, 'r--', "Azure (Verizon), final")
draw_cdf(google_chunk_1_init, 'g-', "Google, start")
draw_cdf(google_chunk_1_middle, 'g.-', "Google, middle")
draw_cdf(google_chunk_1_final, 'g--', "Google, final")


ax.set_xlabel(r'Response time for Chunk 2 across Cloud Provider CDNs', fontsize=12)
ax.set_ylabel(r'Percentage of PlanetLab users', fontsize=12)
plt.xlim([0, 5])
plt.ylim([0, 1])
plt.legend(loc=4)

imgName = "percentusersresptime"
plt.savefig(imgName)
plt.show()

