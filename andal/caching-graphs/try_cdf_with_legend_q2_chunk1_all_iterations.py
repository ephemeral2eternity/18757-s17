import os
import numpy as np
import matplotlib.pyplot as plt

styles = ['k-', 'b.-', 'r--', 'm:', 'ys-', 'go-', 'c^-',
          'k.-', 'b--', 'r:', 'ms-','yo-', 'g^-', 'c-',
          'k--', 'b:', 'rs-', 'mo-', 'y^-', 'g-', 'c.-',
          'k:', 'bs-', 'ro-', 'm^-', 'y-', 'g.-', 'c--',
          'ks-', 'bo-', 'r^-', 'm-', 'y.-', 'g--', 'c-',
          'ko-', 'b^-', 'r-', 'm.-', 'y--', 'g-', 'cs-']

def draw_cdf(data, ls, lg):
    sorted_data = np.sort(data)
    yvals = np.arange(len(sorted_data))/float(len(sorted_data))
    plt.plot(sorted_data, yvals, ls, label=lg, linewidth=1)
    plt.savefig('myfig')

amazon_chunk_1_init = [0.3493509292602539, 0.08656597137451172, 0.14359188079833984, 0.6379489898681641, 0.2929069995880127, 0.06438684463500977, 0.31141090393066406, 0.4034700393676758, 0.9425399303436279, 0.45599889755249023, 0.6377830505371094, 0.3152289390563965, 0.32305097579956055, 0.05581092834472656, 0.24599409103393555, 2.5534961223602295, 0.01748490333557129, 0.3616061210632324, 0.09871792793273926, 1.3832249641418457, 0.02453303337097168, 1.9776790142059326, 1.6605839729309082, 0.32185888290405273, 0.6120288372039795, 0.6104080677032471, 0.01960587501525879, 0.8753008842468262, 0.680549144744873, 1.9200689792633057, 0.30690598487854004, 0.0355679988861084, 0.18203401565551758, 0.08583784103393555, 0.40790700912475586, 0.2725338935852051, 0.468703031539917, 0.355849027633667, 0.4108870029449463, 1.2122859954833984, 0.2956058979034424, 0.594980001449585, 1.2399489879608154, 0.31847310066223145, 0.028089046478271484, 1.3385097980499268, 0.04295206069946289, 0.4495120048522949, 0.05712294578552246, 0.03364300727844238, 0.7338738441467285, 0.0825951099395752, 1.0415339469909668, 0.3202841281890869]

amazon_chunk_1_middle = [0.18155288696289062, 0.17659592628479004, 0.14211106300354004, 0.11223697662353516, 0.04533815383911133, 0.06447100639343262, 0.19310712814331055, 0.12211203575134277, 0.7618160247802734, 0.2655370235443115, 0.022114992141723633, 0.03524494171142578, 0.02089715003967285, 0.054141998291015625, 0.22895503044128418, 1.4345548152923584, 0.015708208084106445, 0.03186607360839844, 0.045571088790893555, 0.08212089538574219, 0.05112600326538086, 0.9422950744628906, 0.04819989204406738, 0.040183067321777344, 0.07892084121704102, 0.37222886085510254, 0.018529891967773438, 0.03599286079406738, 0.07304620742797852, 0.6940510272979736, 0.18984293937683105, 0.03451704978942871, 0.015096902847290039, 0.18442106246948242, 0.10198497772216797, 0.07618403434753418, 0.5491540431976318, 0.09914088249206543, 0.20675897598266602, 0.14213991165161133, 0.18334102630615234, 0.017818927764892578, 0.02693915367126465, 0.08138799667358398, 0.026562929153442383, 0.11903810501098633, 0.42891597747802734, 0.059686899185180664, 0.03507804870605469, 0.03165388107299805, 0.702934980392456, 0.080902099609375, 0.07193899154663086, 0.036023855209350586]

amazon_chunk_1_final = [0.018867969512939453, 0.10175919532775879, 0.1417231559753418, 0.08076906204223633, 0.018377065658569336, 0.06332898139953613, 0.03864407539367676, 0.12600111961364746, 0.8751959800720215, 0.28197598457336426, 0.035386085510253906, 0.0979299545288086, 0.023624897003173828, 0.05208897590637207, 0.23563790321350098, 0.014709949493408203, 0.017884016036987305, 0.016217947006225586, 0.1262199878692627, 0.05561208724975586, 0.019958972930908203, 1.6495959758758545, 0.4138929843902588, 0.0688779354095459, 0.07961106300354004, 0.3982548713684082, 5.025454998016357, 0.03825998306274414, 0.0690908432006836, 0.716742992401123, 0.0645608901977539, 0.06244206428527832, 0.027344942092895508, 0.07404494285583496, 0.11513710021972656, 0.10012698173522949, 0.4559018611907959, 0.08216691017150879, 0.037268877029418945, 0.1448051929473877, 0.2107398509979248, 0.022253990173339844, 0.02897500991821289, 0.08228898048400879, 0.026582956314086914, 0.11759591102600098, 0.0588068962097168, 0.04918098449707031, 0.14843297004699707, 0.031217098236083984, 0.6899309158325195, 0.0798180103302002, 0.07261204719543457, 0.10284709930419922]

google_chunk_1_init = [0.39046192169189453, 0.10889792442321777, 0.270251989364624, 10.29975414276123, 0.6147909164428711, 0.3114790916442871, 1.1231701374053955, 0.5188260078430176, 0.13631701469421387, 0.044686079025268555, 0.44763708114624023, 0.02890801429748535, 0.24901700019836426, 0.708176851272583, 0.3884711265563965, 0.7910268306732178, 0.56746506690979, 0.24933791160583496, 0.045320987701416016, 0.6206159591674805, 1.081238031387329, 0.5688958168029785, 0.18020296096801758, 1.380208969116211, 0.26266908645629883, 0.5072190761566162, 0.6398429870605469, 0.2695629596710205, 0.02882981300354004, 0.26245594024658203, 0.12837886810302734, 0.2765319347381592, 0.21144509315490723, 0.047456979751586914, 0.5902431011199951, 0.038826942443847656, 0.2449030876159668, 0.06116986274719238, 1.165550947189331, 0.6919131278991699, 0.2529938220977783, 1.0145440101623535, 0.33985304832458496, 0.6077771186828613, 0.27999281883239746, 0.060404062271118164, 0.6065030097961426, 0.04455399513244629, 0.9314849376678467, 0.09076881408691406, 0.38378190994262695, 0.28385210037231445, 0.2989010810852051, 0.29606199264526367]

google_chunk_1_middle = [0.039216041564941406, 0.10020899772644043, 0.05902409553527832, 11.994945049285889, 0.0432581901550293, 0.10017514228820801, 0.04460597038269043, 0.17656898498535156, 0.14216089248657227, 0.040596961975097656, 0.08157777786254883, 0.02818012237548828, 0.14154314994812012, 0.23940014839172363, 0.0594789981842041, 1.2509160041809082, 0.5744850635528564, 0.23433804512023926, 0.04546499252319336, 0.12810993194580078, 0.1509997844696045, 0.24221181869506836, 0.1756448745727539, 0.13073301315307617, 0.029036998748779297, 0.13637709617614746, 0.09286785125732422, 0.0366358757019043, 0.027640104293823242, 0.039492130279541016, 0.037554025650024414, 0.04731392860412598, 0.13480305671691895, 0.04787397384643555, 0.5791749954223633, 0.03879594802856445, 0.27187108993530273, 0.05956387519836426, 0.8185291290283203, 1.6216959953308105, 0.24993681907653809, 0.9884490966796875, 0.06211996078491211, 0.29117798805236816, 0.08946013450622559, 0.04992485046386719, 0.08771896362304688, 0.043380022048950195, 0.24922680854797363, 0.08864283561706543, 0.03794693946838379, 0.06108283996582031, 0.14421486854553223, 0.29493093490600586]

google_chunk_1_final = [0.036253929138183594, 0.0987248420715332, 0.03923606872558594, 11.99117398262024, 0.0500638484954834, 0.10637593269348145, 0.03691387176513672, 0.17431998252868652, 0.13513588905334473, 0.04131793975830078, 0.08201885223388672, 0.026784896850585938, 0.2509949207305908, 0.2416839599609375, 0.06064200401306152, 0.749143123626709, 0.5720729827880859, 0.2727830410003662, 0.042784929275512695, 0.13014912605285645, 0.14810585975646973, 0.27091193199157715, 0.17641687393188477, 0.23653101921081543, 0.026972055435180664, 0.13777899742126465, 0.02764606475830078, 0.04234790802001953, 0.026592016220092773, 0.03795194625854492, 0.038559913635253906, 0.05455517768859863, 0.13435006141662598, 0.04599595069885254, 0.5807979106903076, 0.0371091365814209, 0.24282503128051758, 0.06001114845275879, 0.7868947982788086, 0.20642805099487305, 0.2543959617614746, 0.5489768981933594, 0.05680489540100098, 0.29834794998168945, 0.09253811836242676, 0.04799485206604004, 0.08604812622070312, 0.04230189323425293, 0.24880099296569824, 0.08856081962585449, 0.03852987289428711, 0.06218409538269043, 0.13519692420959473, 0.29613208770751953]

azure_verizon_chunk_1_init = [3.868006944656372, 0.4967350959777832, 0.8884530067443848, 0.022755861282348633, 0.0124359130859375, 0.8350059986114502, 0.39629411697387695, 3.4152729511260986, 0.24143600463867188, 1.1243789196014404, 0.019134998321533203, 0.5750858783721924, 0.32875800132751465, 0.02518606185913086, 0.9730441570281982, 0.45563197135925293, 0.320634126663208, 1.3409028053283691, 0.025674819946289062, 0.3156139850616455, 0.007899999618530273, 0.9108140468597412, 0.7674160003662109, 0.20074200630187988, 0.027215003967285156, 0.0177609920501709, 0.5104320049285889, 0.3465769290924072, 0.03288912773132324, 0.7293119430541992, 0.7356820106506348, 0.5893809795379639, 0.099822998046875, 0.5215210914611816, 0.007303953170776367, 1.029383897781372, 0.0216519832611084, 0.35130786895751953, 0.13961195945739746, 0.43355393409729004, 0.3134641647338867, 0.05647611618041992, 0.017661094665527344, 0.40199899673461914, 0.29987502098083496, 0.6661829948425293, 1.3189551830291748, 0.4429440498352051, 0.23591303825378418, 14.568732976913452, 0.40909409523010254, 0.010421037673950195, 0.6507930755615234, 0.008253097534179688]

azure_verizon_chunk_1_middle = [0.8045530319213867, 0.24115586280822754, 0.18085598945617676, 0.021440982818603516, 0.01120901107788086, 0.00710606575012207, 0.11762595176696777, 3.071024179458618, 0.053588151931762695, 0.018199920654296875, 0.01734304428100586, 0.687870979309082, 0.0500788688659668, 0.024116992950439453, 0.03624391555786133, 0.09929704666137695, 0.011008024215698242, 0.1394498348236084, 0.016125202178955078, 0.028036117553710938, 0.020110130310058594, 0.022223949432373047, 0.34076499938964844, 0.07007598876953125, 0.0189359188079834, 0.015506982803344727, 0.015934228897094727, 0.00783085823059082, 0.03275108337402344, 1.2450029850006104, 0.06044602394104004, 0.10642504692077637, 0.0994260311126709, 0.012359857559204102, 0.005769014358520508, 0.286074161529541, 0.021338939666748047, 0.04024696350097656, 0.1386270523071289, 0.8240690231323242, 0.011452913284301758, 0.025454998016357422, 0.00864100456237793, 0.06608819961547852, 0.023813962936401367, 0.06930804252624512, 0.04854893684387207, 0.08640789985656738, 0.020993947982788086, 0.012600183486938477, 0.03187704086303711, 0.009463787078857422, 0.006067991256713867, 0.006318092346191406]

azure_verizon_chunk_1_final = [0.43252992630004883, 0.234450101852417, 0.1898050308227539, 0.021605968475341797, 0.013525962829589844, 0.007153987884521484, 0.11725997924804688, 0.0677499771118164, 0.0529630184173584, 0.018198013305664062, 0.019999027252197266, 0.0807797908782959, 0.053346872329711914, 0.02420806884765625, 0.040255069732666016, 0.09972381591796875, 0.01084589958190918, 0.13829588890075684, 0.015923023223876953, 0.023141860961914062, 0.019482135772705078, 0.022371768951416016, 0.6630759239196777, 0.06900286674499512, 0.018991947174072266, 0.015969038009643555, 0.01609206199645996, 0.008893966674804688, 0.03181791305541992, 1.0224311351776123, 0.06035208702087402, 0.09963798522949219, 0.09799909591674805, 0.010985136032104492, 0.005040884017944336, 0.2900669574737549, 0.022202014923095703, 0.040724992752075195, 0.13873600959777832, 0.8346021175384521, 0.010310173034667969, 0.02095317840576172, 0.012218952178955078, 0.06549906730651855, 0.02335500717163086, 0.09693694114685059, 0.0484769344329834, 0.08556604385375977, 0.020814180374145508, 0.012521028518676758, 0.0337979793548584, 0.009668111801147461, 0.0072939395904541016, 0.006308078765869141]


azure_akamai_chunk_1_init = [0.3951148986816406, 0.6605570316314697, 0.714257001876831, 2.2852258682250977, 0.07421302795410156, 1.6702589988708496, 3.74129581451416, 0.5285050868988037, 0.6700301170349121, 0.7914719581604004, 0.5358560085296631, 0.9046499729156494, 0.32633519172668457, 0.0834808349609375, 1.1595139503479004, 0.524604082107544, 0.8338630199432373, 0.3346090316772461, 0.015960216522216797, 0.09988784790039062, 1.0265071392059326, 0.3504981994628906, 0.9192409515380859, 0.04752492904663086, 0.06344223022460938, 0.03601789474487305, 1.000230073928833, 0.7477450370788574, 0.2106781005859375, 0.5603969097137451, 0.7168600559234619, 0.637516975402832, 0.033499956130981445, 0.2660360336303711, 0.4727001190185547, 0.5129649639129639, 0.3003809452056885, 0.012352943420410156, 3.1074719429016113, 1.4905500411987305, 1.1053950786590576, 0.6044051647186279, 1.1318731307983398, 1.0893959999084473, 1.5182709693908691, 0.540510892868042, 3.0089590549468994, 1.1422441005706787, 0.16769695281982422, 0.8901159763336182, 0.05920600891113281, 0.4183201789855957, 0.7917881011962891, 0.4023110866546631]
azure_akamai_chunk_1_middle = [0.03275704383850098, 0.10410594940185547, 0.06955194473266602, 0.8900740146636963, 0.008051872253417969, 0.4673750400543213, 0.3423318862915039, 0.0484769344329834, 0.6273820400238037, 0.6301050186157227, 0.6341900825500488, 0.05148816108703613, 0.052206993103027344, 0.0573880672454834, 0.022556066513061523, 0.02599191665649414, 0.012651920318603516, 0.011707067489624023, 0.0104827880859375, 0.020601987838745117, 0.023370981216430664, 0.05799412727355957, 0.11937212944030762, 0.0492558479309082, 0.06257104873657227, 0.02863001823425293, 0.2118990421295166, 0.05010509490966797, 0.02032613754272461, 0.11812710762023926, 0.013416051864624023, 0.12165689468383789, 0.03329110145568848, 0.18624615669250488, 0.014392852783203125, 0.06122899055480957, 0.02521204948425293, 0.01229095458984375, 0.12858009338378906, 0.18669605255126953, 0.01067209243774414, 0.22641992568969727, 1.143183946609497, 0.008176088333129883, 0.21695995330810547, 0.019497156143188477, 0.04252195358276367, 0.062187910079956055, 0.017138957977294922, 0.08950185775756836, 0.053015947341918945, 0.045819997787475586, 0.09409403800964355, 0.023280858993530273]
azure_akamai_chunk_1_final = [0.03285408020019531, 0.10108304023742676, 0.2867469787597656, 1.4562420845031738, 0.008278131484985352, 0.4669308662414551, 0.34244513511657715, 0.04847002029418945, 0.4645111560821533, 0.5994060039520264, 0.012686014175415039, 0.04881596565246582, 0.051325082778930664, 0.05672001838684082, 0.022523164749145508, 0.020843029022216797, 0.011986970901489258, 0.011707067489624023, 0.013885021209716797, 0.020643949508666992, 0.023035049438476562, 0.05762600898742676, 0.11946797370910645, 0.0503849983215332, 0.06186509132385254, 0.024763107299804688, 0.36625123023986816, 0.04453897476196289, 0.020596027374267578, 0.11855316162109375, 0.012434005737304688, 0.11203885078430176, 0.03202199935913086, 0.1864018440246582, 0.01137089729309082, 0.05725502967834473, 0.02354717254638672, 0.01230621337890625, 0.14882397651672363, 0.18694210052490234, 0.010607004165649414, 0.21672582626342773, 1.5252320766448975, 0.008249044418334961, 0.22692418098449707, 0.019058942794799805, 0.042788028717041016, 0.061656951904296875, 0.0173799991607666, 0.09110116958618164, 0.05584120750427246, 0.04541897773742676, 0.07283711433410645, 0.02251601219177246]

#amazon_response_time = [0.3493509292602539, 0.08656597137451172, 0.14359188079833984, 0.6379489898681641, 0.2929069995880127, 0.06438684463500977, 0.31141090393066406, 0.4034700393676758, 0.9425399303436279, 0.45599889755249023, 0.6377830505371094, 0.3152289390563965, 0.32305097579956055, 0.05581092834472656, 0.24599409103393555, 2.5534961223602295, 0.01748490333557129, 0.3616061210632324, 0.09871792793273926, 1.3832249641418457, 0.02453303337097168, 1.9776790142059326, 1.6605839729309082, 0.32185888290405273, 0.6120288372039795, 0.6104080677032471, 0.01960587501525879, 0.8753008842468262, 0.680549144744873, 1.9200689792633057, 0.30690598487854004, 0.0355679988861084, 0.18203401565551758, 0.08583784103393555, 0.40790700912475586, 0.2725338935852051, 0.468703031539917, 0.355849027633667, 0.4108870029449463, 1.2122859954833984, 0.2956058979034424, 0.594980001449585, 1.2399489879608154, 0.31847310066223145, 0.028089046478271484, 1.3385097980499268, 0.04295206069946289, 0.4495120048522949, 0.05712294578552246, 0.03364300727844238, 0.7338738441467285, 0.0825951099395752, 1.0415339469909668, 0.3202841281890869] 

fig, ax = plt.subplots()

draw_cdf(amazon_chunk_1_init, 'k-', "AWS (CloudFront), start")
draw_cdf(amazon_chunk_1_middle, 'k.-', "AWS (CloudFront), middle")
draw_cdf(amazon_chunk_1_final, 'k--', "AWS (CloudFront), final")
draw_cdf(azure_akamai_chunk_1_init, 'b-', "Azure (Akamai), start")
draw_cdf(azure_akamai_chunk_1_middle, 'b.-', "Azure (Akamai), middle")
draw_cdf(azure_akamai_chunk_1_final, 'b--', "Azure (Akamai), final")
draw_cdf(azure_verizon_chunk_1_init, 'r-', "Azure (Verizon), start")
draw_cdf(azure_verizon_chunk_1_middle, 'r.-', "Azure (Verizon), middle")
draw_cdf(azure_verizon_chunk_1_final, 'r--', "Azure (Verizon), final")
draw_cdf(google_chunk_1_init, 'g-', "Google, start")
draw_cdf(google_chunk_1_middle, 'g.-', "Google, middle")
draw_cdf(google_chunk_1_final, 'g--', "Google, final")


ax.set_xlabel(r'Response time for Chunk 1 across Cloud Provider CDNs', fontsize=12)
ax.set_ylabel(r'Percentage of PlanetLab users', fontsize=12)
plt.xlim([0, 5])
plt.ylim([0, 1])
plt.legend(loc=4)

imgName = "percentusersresptime"
plt.savefig(imgName)
plt.show()

