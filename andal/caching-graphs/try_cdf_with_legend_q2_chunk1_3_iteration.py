import os
import numpy as np
import matplotlib.pyplot as plt

styles = ['k-', 'b.-', 'r--', 'm:', 'ys-', 'go-', 'c^-',
          'k.-', 'b--', 'r:', 'ms-','yo-', 'g^-', 'c-',
          'k--', 'b:', 'rs-', 'mo-', 'y^-', 'g-', 'c.-',
          'k:', 'bs-', 'ro-', 'm^-', 'y-', 'g.-', 'c--',
          'ks-', 'bo-', 'r^-', 'm-', 'y.-', 'g--', 'c-',
          'ko-', 'b^-', 'r-', 'm.-', 'y--', 'g-', 'cs-']

def draw_cdf(data, ls, lg):
    sorted_data = np.sort(data)
    yvals = np.arange(len(sorted_data))/float(len(sorted_data))
    plt.plot(sorted_data, yvals, ls, label=lg, linewidth=2.0)
    plt.savefig('myfig')

google_response_time = []

azure_response_time_verizon = [3.868006944656372, 0.8045530319213867, 0.43252992630004883, 0.4967350959777832, 0.24115586280822754, 0.234450101852417, 0.8884530067443848, 0.18085598945617676, 0.1898050308227539, 0.022755861282348633, 0.021440982818603516, 0.021605968475341797, 0.0124359130859375, 0.01120901107788086, 0.013525962829589844, 0.8350059986114502, 0.00710606575012207, 0.007153987884521484, 0.39629411697387695, 0.11762595176696777, 0.11725997924804688, 3.4152729511260986, 3.071024179458618, 0.0677499771118164, 0.24143600463867188, 0.053588151931762695, 0.0529630184173584, 1.1243789196014404, 0.018199920654296875, 0.018198013305664062, 0.019134998321533203, 0.01734304428100586, 0.019999027252197266, 0.5750858783721924, 0.687870979309082, 0.0807797908782959, 0.32875800132751465, 0.0500788688659668, 0.053346872329711914, 0.02518606185913086, 0.024116992950439453, 0.02420806884765625, 0.9730441570281982, 0.03624391555786133, 0.040255069732666016, 0.45563197135925293, 0.09929704666137695, 0.09972381591796875, 0.320634126663208, 0.011008024215698242, 0.01084589958190918, 1.3409028053283691, 0.1394498348236084, 0.13829588890075684, 0.025674819946289062, 0.016125202178955078, 0.015923023223876953, 0.3156139850616455, 0.028036117553710938, 0.023141860961914062, 0.007899999618530273, 0.020110130310058594, 0.019482135772705078, 0.9108140468597412, 0.022223949432373047, 0.022371768951416016, 0.7674160003662109, 0.34076499938964844, 0.6630759239196777, 0.20074200630187988, 0.07007598876953125, 0.06900286674499512, 0.027215003967285156, 0.0189359188079834, 0.018991947174072266, 0.0177609920501709, 0.015506982803344727, 0.015969038009643555, 0.5104320049285889, 0.015934228897094727, 0.01609206199645996, 0.3465769290924072, 0.00783085823059082, 0.008893966674804688, 0.03288912773132324, 0.03275108337402344, 0.03181791305541992, 0.7293119430541992, 1.2450029850006104, 1.0224311351776123, 0.7356820106506348, 0.06044602394104004, 0.06035208702087402, 0.5893809795379639, 0.10642504692077637, 0.09963798522949219, 0.099822998046875, 0.0994260311126709, 0.09799909591674805, 0.5215210914611816, 0.012359857559204102, 0.010985136032104492, 0.007303953170776367, 0.005769014358520508, 0.005040884017944336, 1.029383897781372, 0.286074161529541, 0.2900669574737549, 0.0216519832611084, 0.021338939666748047, 0.022202014923095703, 0.35130786895751953, 0.04024696350097656, 0.040724992752075195, 0.13961195945739746, 0.1386270523071289, 0.13873600959777832, 0.43355393409729004, 0.8240690231323242, 0.8346021175384521, 0.3134641647338867, 0.011452913284301758, 0.010310173034667969, 0.05647611618041992, 0.025454998016357422, 0.02095317840576172, 0.017661094665527344, 0.00864100456237793, 0.012218952178955078, 0.40199899673461914, 0.06608819961547852, 0.06549906730651855, 0.29987502098083496, 0.023813962936401367, 0.02335500717163086, 0.6661829948425293, 0.06930804252624512, 0.09693694114685059, 1.3189551830291748, 0.04854893684387207, 0.0484769344329834, 0.4429440498352051, 0.08640789985656738, 0.08556604385375977, 0.23591303825378418, 0.020993947982788086, 0.020814180374145508, 14.568732976913452, 0.012600183486938477, 0.012521028518676758, 0.40909409523010254, 0.03187704086303711, 0.0337979793548584, 0.010421037673950195, 0.009463787078857422, 0.009668111801147461, 0.6507930755615234, 0.006067991256713867, 0.0072939395904541016, 0.008253097534179688, 0.006318092346191406, 0.006308078765869141]

azure_response_time_akamai = [0.3951148986816406, 0.03275704383850098, 0.03285408020019531, 0.6605570316314697, 0.10410594940185547, 0.10108304023742676, 0.714257001876831, 0.06955194473266602, 0.2867469787597656, 2.2852258682250977, 0.8900740146636963, 1.4562420845031738, 0.07421302795410156, 0.008051872253417969, 0.008278131484985352, 1.6702589988708496, 0.4673750400543213, 0.4669308662414551, 3.74129581451416, 0.3423318862915039, 0.34244513511657715, 0.5285050868988037, 0.0484769344329834, 0.04847002029418945, 0.6700301170349121, 0.6273820400238037, 0.4645111560821533, 0.7914719581604004, 0.6301050186157227, 0.5994060039520264, 0.5358560085296631, 0.6341900825500488, 0.012686014175415039, 0.9046499729156494, 0.05148816108703613, 0.04881596565246582, 0.32633519172668457, 0.052206993103027344, 0.051325082778930664, 0.0834808349609375, 0.0573880672454834, 0.05672001838684082, 1.1595139503479004, 0.022556066513061523, 0.022523164749145508, 0.524604082107544, 0.02599191665649414, 0.020843029022216797, 0.8338630199432373, 0.012651920318603516, 0.011986970901489258, 0.3346090316772461, 0.011707067489624023, 0.011707067489624023, 0.015960216522216797, 0.0104827880859375, 0.013885021209716797, 0.09988784790039062, 0.020601987838745117, 0.020643949508666992, 1.0265071392059326, 0.023370981216430664, 0.023035049438476562, 0.3504981994628906, 0.05799412727355957, 0.05762600898742676, 0.9192409515380859, 0.11937212944030762, 0.11946797370910645, 0.04752492904663086, 0.0492558479309082, 0.0503849983215332, 0.06344223022460938, 0.06257104873657227, 0.06186509132385254, 0.03601789474487305, 0.02863001823425293, 0.024763107299804688, 1.000230073928833, 0.2118990421295166, 0.36625123023986816, 0.7477450370788574, 0.05010509490966797, 0.04453897476196289, 0.2106781005859375, 0.02032613754272461, 0.020596027374267578, 0.5603969097137451, 0.11812710762023926, 0.11855316162109375, 0.7168600559234619, 0.013416051864624023, 0.012434005737304688, 0.637516975402832, 0.12165689468383789, 0.11203885078430176, 0.033499956130981445, 0.03329110145568848, 0.03202199935913086, 0.2660360336303711, 0.18624615669250488, 0.1864018440246582, 0.4727001190185547, 0.014392852783203125, 0.01137089729309082, 0.5129649639129639, 0.06122899055480957, 0.05725502967834473, 0.3003809452056885, 0.02521204948425293, 0.02354717254638672, 0.012352943420410156, 0.01229095458984375, 0.01230621337890625, 3.1074719429016113, 0.12858009338378906, 0.14882397651672363, 1.4905500411987305, 0.18669605255126953, 0.18694210052490234, 1.1053950786590576, 0.01067209243774414, 0.010607004165649414, 0.6044051647186279, 0.22641992568969727, 0.21672582626342773, 1.1318731307983398, 1.143183946609497, 1.5252320766448975, 1.0893959999084473, 0.008176088333129883, 0.008249044418334961, 1.5182709693908691, 0.21695995330810547, 0.22692418098449707, 0.540510892868042, 0.019497156143188477, 0.019058942794799805, 3.0089590549468994, 0.04252195358276367, 0.042788028717041016, 1.1422441005706787, 0.062187910079956055, 0.061656951904296875, 0.16769695281982422, 0.017138957977294922, 0.0173799991607666, 0.8901159763336182, 0.08950185775756836, 0.09110116958618164, 0.05920600891113281, 0.053015947341918945, 0.05584120750427246, 0.4183201789855957, 0.045819997787475586, 0.04541897773742676, 0.7917881011962891, 0.09409403800964355, 0.07283711433410645, 0.4023110866546631, 0.023280858993530273, 0.02251601219177246]

amazon_response_time = [0.3493509292602539, 0.18155288696289062, 0.018867969512939453, 0.08656597137451172, 0.17659592628479004, 0.10175919532775879, 0.14359188079833984, 0.14211106300354004, 0.1417231559753418, 0.6379489898681641, 0.11223697662353516, 0.08076906204223633, 0.2929069995880127, 0.04533815383911133, 0.018377065658569336, 0.06438684463500977, 0.06447100639343262, 0.06332898139953613, 0.31141090393066406, 0.19310712814331055, 0.03864407539367676, 0.4034700393676758, 0.12211203575134277, 0.12600111961364746, 0.9425399303436279, 0.7618160247802734, 0.8751959800720215, 0.45599889755249023, 0.2655370235443115, 0.28197598457336426, 0.6377830505371094, 0.022114992141723633, 0.035386085510253906, 0.3152289390563965, 0.03524494171142578, 0.0979299545288086, 0.32305097579956055, 0.02089715003967285, 0.023624897003173828, 0.05581092834472656, 0.054141998291015625, 0.05208897590637207, 0.24599409103393555, 0.22895503044128418, 0.23563790321350098, 2.5534961223602295, 1.4345548152923584, 0.014709949493408203, 0.01748490333557129, 0.015708208084106445, 0.017884016036987305, 0.3616061210632324, 0.03186607360839844, 0.016217947006225586, 0.09871792793273926, 0.045571088790893555, 0.1262199878692627, 1.3832249641418457, 0.08212089538574219, 0.05561208724975586, 0.02453303337097168, 0.05112600326538086, 0.019958972930908203, 1.9776790142059326, 0.9422950744628906, 1.6495959758758545, 1.6605839729309082, 0.04819989204406738, 0.4138929843902588, 0.32185888290405273, 0.040183067321777344, 0.0688779354095459, 0.6120288372039795, 0.07892084121704102, 0.07961106300354004, 0.6104080677032471, 0.37222886085510254, 0.3982548713684082, 0.01960587501525879, 0.018529891967773438, 5.025454998016357, 0.8753008842468262, 0.03599286079406738, 0.03825998306274414, 0.680549144744873, 0.07304620742797852, 0.0690908432006836, 1.9200689792633057, 0.6940510272979736, 0.716742992401123, 0.30690598487854004, 0.18984293937683105, 0.0645608901977539, 0.0355679988861084, 0.03451704978942871, 0.06244206428527832, 0.18203401565551758, 0.015096902847290039, 0.027344942092895508, 0.08583784103393555, 0.18442106246948242, 0.07404494285583496, 0.40790700912475586, 0.10198497772216797, 0.11513710021972656, 0.2725338935852051, 0.07618403434753418, 0.10012698173522949, 0.468703031539917, 0.5491540431976318, 0.4559018611907959, 0.355849027633667, 0.09914088249206543, 0.08216691017150879, 0.4108870029449463, 0.20675897598266602, 0.037268877029418945, 1.2122859954833984, 0.14213991165161133, 0.1448051929473877, 0.2956058979034424, 0.18334102630615234, 0.2107398509979248, 0.594980001449585, 0.017818927764892578, 0.022253990173339844, 1.2399489879608154, 0.02693915367126465, 0.02897500991821289, 0.31847310066223145, 0.08138799667358398, 0.08228898048400879, 0.028089046478271484, 0.026562929153442383, 0.026582956314086914, 1.3385097980499268, 0.11903810501098633, 0.11759591102600098, 0.04295206069946289, 0.42891597747802734, 0.0588068962097168, 0.4495120048522949, 0.059686899185180664, 0.04918098449707031, 0.05712294578552246, 0.03507804870605469, 0.14843297004699707, 0.03364300727844238, 0.03165388107299805, 0.031217098236083984, 0.7338738441467285, 0.702934980392456, 0.6899309158325195, 0.0825951099395752, 0.080902099609375, 0.0798180103302002, 1.0415339469909668, 0.07193899154663086, 0.07261204719543457, 0.3202841281890869, 0.036023855209350586, 0.10284709930419922]

fig, ax = plt.subplots()

draw_cdf(google_response_time, styles[0], "Google Cloud CDN")
draw_cdf(azure_response_time_verizon, styles[1], "Azure CDN (Verizon)")
draw_cdf(azure_response_time_akamai, styles[2], "Azure CDN (Akamai)")
draw_cdf(amazon_response_time, styles[3], "Amazon CloudFront")

ax.set_xlabel(r'Response time at the start, middle & end of the experiment (Chunk 1)', fontsize=12)
ax.set_ylabel(r'Percentage of PlanetLab users', fontsize=12)
plt.xlim([0, 5])
plt.ylim([0, 1])
plt.legend(loc=4)

imgName = "percentusersresptime"
plt.savefig(imgName)
plt.show()

