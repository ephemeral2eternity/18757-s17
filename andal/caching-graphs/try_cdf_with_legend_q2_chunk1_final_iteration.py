import os
import numpy as np
import matplotlib.pyplot as plt

styles = ['k-', 'b.-', 'r--', 'm:', 'ys-', 'go-', 'c^-',
          'k.-', 'b--', 'r:', 'ms-','yo-', 'g^-', 'c-',
          'k--', 'b:', 'rs-', 'mo-', 'y^-', 'g-', 'c.-',
          'k:', 'bs-', 'ro-', 'm^-', 'y-', 'g.-', 'c--',
          'ks-', 'bo-', 'r^-', 'm-', 'y.-', 'g--', 'c-',
          'ko-', 'b^-', 'r-', 'm.-', 'y--', 'g-', 'cs-']

def draw_cdf(data, ls, lg):
    sorted_data = np.sort(data)
    yvals = np.arange(len(sorted_data))/float(len(sorted_data))
    plt.plot(sorted_data, yvals, ls, label=lg, linewidth=2.0)
    plt.savefig('myfig')

google_response_time = []

azure_response_time_verizon = [0.43252992630004883, 0.234450101852417, 0.1898050308227539, 0.021605968475341797, 0.013525962829589844, 0.007153987884521484, 0.11725997924804688, 0.0677499771118164, 0.0529630184173584, 0.018198013305664062, 0.019999027252197266, 0.0807797908782959, 0.053346872329711914, 0.02420806884765625, 0.040255069732666016, 0.09972381591796875, 0.01084589958190918, 0.13829588890075684, 0.015923023223876953, 0.023141860961914062, 0.019482135772705078, 0.022371768951416016, 0.6630759239196777, 0.06900286674499512, 0.018991947174072266, 0.015969038009643555, 0.01609206199645996, 0.008893966674804688, 0.03181791305541992, 1.0224311351776123, 0.06035208702087402, 0.09963798522949219, 0.09799909591674805, 0.010985136032104492, 0.005040884017944336, 0.2900669574737549, 0.022202014923095703, 0.040724992752075195, 0.13873600959777832, 0.8346021175384521, 0.010310173034667969, 0.02095317840576172, 0.012218952178955078, 0.06549906730651855, 0.02335500717163086, 0.09693694114685059, 0.0484769344329834, 0.08556604385375977, 0.020814180374145508, 0.012521028518676758, 0.0337979793548584, 0.009668111801147461, 0.0072939395904541016, 0.006308078765869141]

azure_response_time_akamai = [0.03285408020019531, 0.10108304023742676, 0.2867469787597656, 1.4562420845031738, 0.008278131484985352, 0.4669308662414551, 0.34244513511657715, 0.04847002029418945, 0.4645111560821533, 0.5994060039520264, 0.012686014175415039, 0.04881596565246582, 0.051325082778930664, 0.05672001838684082, 0.022523164749145508, 0.020843029022216797, 0.011986970901489258, 0.011707067489624023, 0.013885021209716797, 0.020643949508666992, 0.023035049438476562, 0.05762600898742676, 0.11946797370910645, 0.0503849983215332, 0.06186509132385254, 0.024763107299804688, 0.36625123023986816, 0.04453897476196289, 0.020596027374267578, 0.11855316162109375, 0.012434005737304688, 0.11203885078430176, 0.03202199935913086, 0.1864018440246582, 0.01137089729309082, 0.05725502967834473, 0.02354717254638672, 0.01230621337890625, 0.14882397651672363, 0.18694210052490234, 0.010607004165649414, 0.21672582626342773, 1.5252320766448975, 0.008249044418334961, 0.22692418098449707, 0.019058942794799805, 0.042788028717041016, 0.061656951904296875, 0.0173799991607666, 0.09110116958618164, 0.05584120750427246, 0.04541897773742676, 0.07283711433410645, 0.02251601219177246]

amazon_response_time = [0.018867969512939453, 0.10175919532775879, 0.1417231559753418, 0.08076906204223633, 0.018377065658569336, 0.06332898139953613, 0.03864407539367676, 0.12600111961364746, 0.8751959800720215, 0.28197598457336426, 0.035386085510253906, 0.0979299545288086, 0.023624897003173828, 0.05208897590637207, 0.23563790321350098, 0.014709949493408203, 0.017884016036987305, 0.016217947006225586, 0.1262199878692627, 0.05561208724975586, 0.019958972930908203, 1.6495959758758545, 0.4138929843902588, 0.0688779354095459, 0.07961106300354004, 0.3982548713684082, 5.025454998016357, 0.03825998306274414, 0.0690908432006836, 0.716742992401123, 0.0645608901977539, 0.06244206428527832, 0.027344942092895508, 0.07404494285583496, 0.11513710021972656, 0.10012698173522949, 0.4559018611907959, 0.08216691017150879, 0.037268877029418945, 0.1448051929473877, 0.2107398509979248, 0.022253990173339844, 0.02897500991821289, 0.08228898048400879, 0.026582956314086914, 0.11759591102600098, 0.0588068962097168, 0.04918098449707031, 0.14843297004699707, 0.031217098236083984, 0.6899309158325195, 0.0798180103302002, 0.07261204719543457, 0.10284709930419922] 

fig, ax = plt.subplots()

draw_cdf(google_response_time, styles[0], "Google Cloud CDN")
draw_cdf(azure_response_time_verizon, styles[1], "Azure CDN (Verizon)")
draw_cdf(azure_response_time_akamai, styles[2], "Azure CDN (Akamai)")
draw_cdf(amazon_response_time, styles[3], "Amazon CloudFront")

ax.set_xlabel(r'Response time at the end of the experiment (Chunk 1)', fontsize=12)
ax.set_ylabel(r'Percentage of PlanetLab users', fontsize=12)
plt.xlim([0, 5])
plt.ylim([0, 1])
plt.legend(loc=4)

imgName = "percentusersresptime"
plt.savefig(imgName)
plt.show()

