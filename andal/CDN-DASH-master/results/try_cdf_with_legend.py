import os
import numpy as np
import matplotlib.pyplot as plt

styles = ['k-', 'b.-', 'r--', 'm:', 'ys-', 'go-', 'c^-',
          'k.-', 'b--', 'r:', 'ms-','yo-', 'g^-', 'c-',
          'k--', 'b:', 'rs-', 'mo-', 'y^-', 'g-', 'c.-',
          'k:', 'bs-', 'ro-', 'm^-', 'y-', 'g.-', 'c--',
          'ks-', 'bo-', 'r^-', 'm-', 'y.-', 'g--', 'c-',
          'ko-', 'b^-', 'r-', 'm.-', 'y--', 'g-', 'cs-']

def draw_cdf(data, ls, lg):
    sorted_data = np.sort(data)
    yvals = np.arange(len(sorted_data))/float(len(sorted_data))
    plt.plot(sorted_data, yvals, ls, label=lg, linewidth=2.0)
    plt.savefig('myfig')

google_response_time = [0.2748839855194092, 1.01301908493042, 0.07595205307006836, 0.05564379692077637, 0.6058390140533447, 0.2954530715942383, 0.11817598342895508, 0.3526909351348877, 0.704355001449585, 0.029953956604003906, 1.8720769882202148, 1.4824929237365723, 0.28441596031188965, 0.24442720413208008, 0.2549910545349121, 0.31440091133117676, 0.039215087890625, 0.7829458713531494, 0.2516348361968994, 0.04538297653198242, 0.2868509292602539, 0.7130510807037354, 0.5421280860900879, 0.3711709976196289, 0.11363911628723145, 0.04429006576538086, 0.040139198303222656, 0.3053770065307617, 0.21721291542053223, 0.5499560832977295, 0.09032917022705078, 0.24873018264770508, 0.04543900489807129, 0.5896890163421631, 0.26372504234313965, 0.9112820625305176, 10.295353174209595, 2.0031471252441406, 0.5284779071807861, 0.24138903617858887, 0.13601183891296387, 0.5869510173797607, 0.25290799140930176, 0.18256902694702148, 0.5345778465270996, 0.5703661441802979, 0.046723127365112305, 1.4100420475006104, 0.3206160068511963, 0.30919504165649414, 0.3677668571472168, 0.4352109432220459, 0.31288909912109375, 0.6333539485931396, 0.3203749656677246]

azure_response_time_verizon = [3.7872369289398193, 0.5853331089019775, 0.018366098403930664, 0.01198720932006836, 0.9130380153656006, 1.2820320129394531, 0.8376879692077637, 0.024431943893432617, 0.04024505615234375, 0.3209199905395508, 0.4819478988647461, 1.8691139221191406, 3.9496982097625732, 0.2719419002532959, 2.644186019897461, 0.5935640335083008, 1.411635160446167, 0.5301949977874756, 1.1125810146331787, 0.5327928066253662, 0.023300886154174805, 0.3234870433807373, 0.007560014724731445, 0.9359898567199707, 0.6773920059204102, 0.7021069526672363, 1.7161259651184082, 0.3422970771789551, 0.017444849014282227, 0.9923360347747803, 10.577815055847168, 0.02490091323852539, 1.403752088546753, 0.013747930526733398, 0.31805419921875, 3.2299158573150635, 0.1010441780090332, 1.1109678745269775, 0.008066892623901367, 0.025855064392089844, 0.03444194793701172, 1.0440318584442139, 0.29499316215515137, 0.7630620002746582, 0.022548913955688477, 0.6536350250244141, 0.008259057998657227, 0.3281280994415283, 0.13988208770751953, 1.2404770851135254, 0.4045250415802002, 0.6866908073425293, 0.0634160041809082, 0.2697329521179199, 0.5232250690460205]

azure_response_time_akamai = [0.44177794456481934, 0.09692502021789551, 1.0083630084991455, 1.2725718021392822, 0.46099281311035156, 10.366580963134766, 1.6008400917053223, 0.7028381824493408, 0.3072490692138672, 0.433366060256958, 1.078246831893921, 0.03591299057006836, 3.615211009979248, 0.24431681632995605, 0.3223419189453125, 0.27040886878967285, 0.01791095733642578, 0.4854578971862793, 0.7505979537963867, 1.9709229469299316, 0.6143548488616943, 1.7874011993408203, 1.4697520732879639, 3.0517759323120117, 0.34803318977355957, 0.49530792236328125, 0.6920621395111084, 1.265550136566162, 0.466494083404541, 0.04074692726135254, 0.5112931728363037, 0.013295888900756836, 0.045905113220214844, 15.710791110992432, 0.36508893966674805, 0.8356950283050537, 2.246535062789917, 0.3366990089416504, 0.6736211776733398, 1.164729118347168, 1.1821608543395996, 0.6254310607910156, 1.4899799823760986, 0.4601929187774658, 0.33069300651550293, 0.05035090446472168, 0.21514415740966797, 0.012356042861938477, 0.23950505256652832, 0.7482500076293945, 2.0485708713531494, 0.01553201675415039, 0.9770150184631348, 0.8765850067138672, 0.05714702606201172]

amazon_response_time = [0.013684988021850586, 0.15482783317565918, 0.14637398719787598, 1.7730469703674316, 1.747192144393921, 0.06378793716430664, 0.42580389976501465, 1.123349905014038, 0.5743091106414795, 0.2825179100036621, 0.03643202781677246, 0.032347917556762695, 0.10381698608398438, 0.07189607620239258, 0.7990670204162598, 1.2149910926818848, 0.7076120376586914, 1.1933720111846924, 0.2713789939880371, 0.36652684211730957, 10.304625034332275, 0.3531460762023926, 0.029705047607421875, 0.647071123123169, 0.4303169250488281, 0.7431650161743164, 1.5885701179504395, 0.34583497047424316, 0.3439810276031494, 2.3261260986328125, 0.4965629577636719, 0.331632137298584, 0.018368959426879883, 0.47585105895996094, 1.106384038925171, 1.1220970153808594, 0.6745920181274414, 0.8490109443664551, 0.3342299461364746, 1.6847050189971924, 0.011848211288452148, 0.39231181144714355, 0.43097591400146484, 0.02625107765197754, 0.5338931083679199, 0.2212200164794922, 0.2533390522003174, 0.31989002227783203, 0.012894153594970703, 0.05695295333862305, 0.3040938377380371, 0.044506072998046875, 0.3473780155181885, 0.10837578773498535, 0.6218640804290771, 1.0818281173706055]

fig, ax = plt.subplots()

draw_cdf(google_response_time, styles[0], "Google Cloud CDN")
draw_cdf(azure_response_time_verizon, styles[1], "Azure CDN (Verizon)")
draw_cdf(azure_response_time_akamai, styles[2], "Azure CDN (Akamai)")
draw_cdf(amazon_response_time, styles[3], "Amazon CloudFront")

ax.set_xlabel(r'Response time at the beginning of the experiment', fontsize=12)
ax.set_ylabel(r'Percentage of PlanetLab users', fontsize=12)
plt.xlim([0, 5])
plt.ylim([0, 1])
plt.legend(loc=4)

imgName = "percentusersresptime"
plt.savefig(imgName)
plt.show()

